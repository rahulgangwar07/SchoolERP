<div class="container mt-5">
  <!-- Page Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h4 class="mb-0">Outbox List</h4>
      <small class="text-muted">Manage Your Voice Calls</small>
    </div>
    <div>
      <a class="btn btn-primary btn-sm" [routerLink]="'/sms-board/compose-sms'">
        Compose SMS
      </a>
    </div>
  </div>

  <!-- Outbox Table -->
  <div class="card shadow-sm">
    <div class="card-body p-0">
      <table class="table table-striped mb-0">
        <thead class="thead-light">
          <tr>
            <th scope="col">Sr. No.</th>
            <th scope="col">Sender</th>
            <th scope="col">Receiver</th>
            <th scope="col">Type</th>
            <th scope="col">Sent On</th>
            <th scope="col">Message</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let sms of composedSMS;index as i;">
            <td>{{i+1}}</td>
            <td>
              <strong>Admin</strong><br>
              <span class="text-muted">{{smsGateway.primary_sender_id}}</span><br>
              <small class="text-muted">{{sms.template_id}}</small>
            </td>
            <td>
              <button (click)="openPopup(smsGateway.primary_sender_id,sms.smsRecipients,sms.message)"
                      class="btn count-btn"><span>Total: <strong>{{sms.sms_count}}</strong></span></button><br>
              <small class="text-muted">MjMyNDMwNg==</small>
            </td>
            <td>
              <strong>{{sms.sentTo}}</strong><br>
              <small class="text-muted">(Sent From: SMS)</small>
            </td>
            <td>
              <span class="text-nowrap">{{sms.sent_At | date : 'dd MMM yyyy HH:MM'}}</span>
            </td>
            <td>
              <strong class="text-muted" *ngIf="sms.sms_count>1">Bulk Send</strong>
              <strong class="text-muted" *ngIf="sms.sms_count==1">Single Send</strong>
              <br>
              <span>{{sms.message}}</span>
            </td>
          </tr> 
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-sms-outbox-popup *ngIf="popup" [popupStatus]="popup" (status)="changePopup($event)" [data]="data"></app-sms-outbox-popup>
